<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <input type="button" value="start" id="start" onclick="b()" />
    <input type="button" value="stop" id="stop" />
    <div id='messages'></div>
	 <script>
	 function b() {
	 var socket,
            messages = document.getElementById('messages');
        document.getElementById('start').onclick = () => {
            if (typeof (WebSocket) !== 'undefined') {
                socket = new WebSocket("ws://localhost:12243/socket");
                alert('Create socket')
            } else {
                socket = new MozWebSocket("ws://localhost:12243/socket");
                alert('Create socketMoz')
            }

            socket.onmessage = function (msg) {
				console.log("lol2");
                var $el = document.createElement('p');
                $el.innerHTML = msg.data;
                messages.appendChild($el);
            };

            socket.onclose = function (event) {
                alert('stop');
            };
        };

        document.getElementById('stop').onclick = function () {
            socket.close();
            alert('Close socket')
        };
	}
    </script>
</body>
</html>
